var googleOneTap={accountsHost:"",modalSection:"external-provider-modal-section",modalRegisterId:"#externalProviderRegisterModal",modalLinkId:"#externalProviderLinkModal",userNameExists:!1,emailVerified:!1,init:function(e,t=0){var o,n=window.location.pathname.split("/").filter(e=>""!=e).map(e=>e.toLowerCase());["betting","casino","picks","sport","sports"].includes(n[0])||null==e||""==e||(googleOneTap.accountsHost=e,o=document.cookie.match(new RegExp("(^| )CookieConsent")),window.onload=function(){googleOneTap.getLoggedIn(function(){google.accounts.id.initialize({client_id:"803005929824-3r1mis1k0706un2t402gsis46om7c09j.apps.googleusercontent.com",callback:googleOneTap.handleCredentialResponse,state_cookie_domain:".covers.com",cancel_on_tap_outside:!!o}),google.accounts.id.prompt()})})},handleCredentialResponse:function(t){var e=googleOneTap.accountsHost+"/ExtProvLogin?token="+t.credential;fetch(e,{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>e.json()).then(e=>{e.success&&!e.exists?(document.cookie="loggedIn=true;",window.location.href.includes(googleOneTap.accountsHost)?window.location=""+googleOneTap.accountsHost:location.reload()):e.success||e.exists?googleOneTap.getModalContent(!0,function(){googleOneTap.initLinkForm(t.credential)}):googleOneTap.getModalContent(!1,function(){googleOneTap.initRegisterForm(t.credential)})})},initRegisterForm:function(e){var t=document.getElementById("cmg_acct_ext_formRegistration");const o=document.getElementById("cmg_acct_ext_inputUsername"),n=document.querySelectorAll("div[data-value-msg-for='Username']")[0],a=document.querySelectorAll("span[for='cmg_acct_ext_inputUsername']")[0];var i=document.getElementById("cmg_acct_ext_inputEmail");const s=document.querySelectorAll("div[data-value-msg-for='Email']")[0],l=document.querySelectorAll("span[for='cmg_acct_ext_inputEmail']")[0];function c(){o.validity.valueMissing?(a.textContent="Required Field",n.classList.remove("hide")):o.validity.patternMismatch&&(a.textContent="Length 3-15 characters. Starts with a letter, can contain letters and numbers, and characters: _-",n.classList.remove("hide"))}o.addEventListener("input",e=>{o.validity.valid?(a.textContent="",n.classList.add("hide"),e=googleOneTap.accountsHost+"/ExtProvValidateUserName?username="+e.currentTarget.value,fetch(e).then(e=>e.json()).then(e=>{googleOneTap.userNameExists=!1,e||(a.textContent="Display name already taken",n.classList.remove("hide"),googleOneTap.userNameExists=!0)})):c()}),t.addEventListener("submit",e=>{e.preventDefault(),o.validity.valid?googleOneTap.userNameExists?(a.textContent="Display name already taken",n.classList.remove("hide")):googleOneTap.emailVerified&&fetch(e.target.action,{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(e.target))}).then(e=>e.json()).then(e=>{e.success?window.location.href.includes(googleOneTap.accountsHost)?window.location=""+googleOneTap.accountsHost:location.reload():((e=e.errors).Username&&0<e.Username.length&&(a.textContent=e.Username[0],n.classList.remove("hide")),e.Email&&0<e.Email.length&&(l.textContent=e.Username[0],s.classList.remove("hide")))}):c()});t=googleOneTap.parseJwt(e);i.value=t.email,document.getElementById("Token").value=e,googleOneTap.emailVerified=t.email_verified,t.email_verified?(l.textContent="Your email has been authenticated by Google",s.classList.add("cmg_valid"),s.classList.remove("cmg_error")):(l.textContent="Your email is not verified",s.classList.addClass("cmg_error"),s.classList.removeClass("cmg_valid")),$(googleOneTap.modalRegisterId).modal("show")},initLinkForm:function(e){var t=document.getElementById("cmg_acct_ext_formLink");const o=document.getElementById("cmg_acct_ext_inputPassword"),n=document.querySelectorAll("div[data-value-msg-for='Password']")[0],a=document.querySelectorAll("span[for='cmg_acct_ext_inputPassword']")[0];function i(){o.validity.valueMissing&&(a.textContent="Required Field",n.classList.remove("hide"))}o.addEventListener("input",e=>{o.validity.valid||i()}),t.addEventListener("submit",e=>{e.preventDefault(),o.validity.valid?fetch(e.target.action,{method:"POST",credentials:"include",body:new URLSearchParams(new FormData(e.target))}).then(e=>e.json()).then(e=>{e.success?window.location.href.includes(googleOneTap.accountsHost)?window.location=""+googleOneTap.accountsHost:location.reload():(e=e.errors).Password&&0<e.Password.length&&(a.textContent=e.Password[0],n.classList.remove("hide"))}):i()});t=googleOneTap.parseJwt(e);document.getElementById("cmg_acct_ext_inputEmail").innerHTML=t.email,document.getElementById("Token").value=e,$(googleOneTap.modalLinkId).modal("show")},parseJwt:function(e){e=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)},getModalContent:function(e,o){e=googleOneTap.accountsHost+"/"+(e?"ExtProvLinkDialog":"ExtProvRegisterDialog");fetch(e).then(e=>e.text()).then(e=>{var t;null!=e&&""!=e&&((t=document.createElement("div")).setAttribute("id",googleOneTap.modalSection),t.innerHTML=e,document.body.appendChild(t),null!=o)&&o()})},getLoggedIn:function(t){var e=googleOneTap.accountsHost+"/LoginJson";$.ajax({url:e,success:function(e){null!=e&&e.Authenticated||null==t||t()},dataType:"jsonp"})}};